{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/watcher.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'GUY/temp/tests'\n{ rpr\n  inspect\n  echo\n  log     }               = GUY.trm\n#...........................................................................................................\nPATH                      = require 'path'\nFS                        = require 'fs'\n# { freeze }                = require 'letsfreezethat'\n# H                         = require './helpers'\n# types                     = new ( require 'intertype' ).Intertype()\n# { isa\n#   declare\n#   type_of\n#   validate\n#   equals }                = types\n{ Pipeline\n  $         }             = require 'moonriver'\n{ after\n  defer\n  sleep }                 = GUY.async\n\n\n#===========================================================================================================\ncreate_pipeline = ->\n  pipeline        = new Pipeline()\n  # pipeline.push ( d ) -> warn GUY.datetime.now(), '^858-4^', 'pipeline', d\n  pipeline.push ( d ) ->\n    return null unless d.key in [ 'add', 'change', ]\n    help GUY.datetime.now(), '^858-4^', 'pipeline: changed:', d.path\n  return pipeline\n\n\n#===========================================================================================================\nclass My_watcher extends GUY.watch.Watcher\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( pipeline ) ->\n    super { ignored: /(^|\\/)\\..|node_modules/, }\n    @pipeline = pipeline\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  on_all: ( key, path ) ->\n    # whisper GUY.datetime.now(), '^858-1^', 'my_watcher', key, path\n    @pipeline.send { key, path, }\n    null for d from @pipeline.walk()\n    return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo = -> new Promise ( resolve, reject ) =>\n  project_path      = PATH.dirname __dirname\n  watcher           = new My_watcher create_pipeline()\n  watcher.add_path PATH.join project_path, 'pages/**/*.md'\n  watcher.add_path PATH.join project_path, 'public/**/*.css'\n  watcher.add_path PATH.join project_path, 'public/**/*.js'\n  watcher.add_path PATH.join project_path, 'public/**/*.html'\n  await after 100, ->\n    return resolve()\n  return\n  #.......................................................................................................\n  new_path_1        = PATH.join folder_path, 'new_1.txt'\n  new_folder_path   = PATH.join folder_path, 'sub'\n  new_path_2        = PATH.join folder_path, 'sub/new_2.txt'\n  #.......................................................................................................\n  # await sleep 0.25\n  FS.writeFileSync new_path_1, 'helo'\n  FS.mkdirSync new_folder_path\n  FS.writeFileSync new_path_2, 'helo'\n  await sleep 0.25\n  FS.writeFileSync new_path_1, 'sfhsoifhas'\n  FS.writeFileSync new_path_2, 'helo'\n  await sleep 0.25\n  FS.writeFileSync new_path_2, 'helo'\n  FS.rmSync new_path_2\n  FS.rmdirSync new_folder_path\n  after 0.25, =>\n    debug GUY.datetime.now(), '^858-5^', \"stopping watcher\"\n    await watcher.stop()\n    debug GUY.datetime.now(), '^858-6^', \"removing #{folder_path}\"\n    rm?()\n    resolve()\n    # return null\n  return null\n  #.........................................................................................................\n  resolve()\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_zx = ->\n  #.........................................................................................................\n  { $ } = await import( 'zx' )\n  source_path = './playlist.md'\n  help \"compiling #{source_path}\"\n  await $\"\"\"\n    date +\"%Y-%m-%d %H:%M:%S\"\n    pandoc -o ./tmp/playlist.html #{source_path}\n    echo '<!DOCTYPE html>' | cat - ./tmp/playlist.html > ./public/playlist.html\n    trash ./tmp/playlist.html\"\"\"\n  #.........................................................................................................\n  return null\n\n\n############################################################################################################\nif require.main is module then do =>\n  await demo()\n  # await demo_zx()\n\n"
  ]
}