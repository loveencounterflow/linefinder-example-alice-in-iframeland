{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/ops2.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\nglobalThis.log = console.log\nglobalThis.debug = console.debug\n\n\n#-----------------------------------------------------------------------------------------------------------\nadd_line_markers = ( ref_element, element ) ->\n  debug 'add_line_markers', element\n  # debug '^32342^', µ.DOM.select_all_from element, '.µ-clientrec'\n  µ.DOM.remove marker for marker in µ.DOM.select_all_from element, '.µ-clientrec'\n  #.........................................................................................................\n  ref_rectangle = ref_element.getBoundingClientRect()\n  #.........................................................................................................\n  for rectangle, idx in element.getClientRects()\n    scroll_top                = 0 # -element.scrollTop\n    scroll_left               = 0 # -element.scrollLeft\n    # scroll_top                = µ.DOM.get_document_scroll_top()\n    # scroll_left               = µ.DOM.get_document_scroll_left()\n    marker_top                = rectangle.top     - ref_rectangle.top  + ref_element.scrollTop\n    if idx is 0\n      debug '^423^', marker_top, rectangle.top, ref_rectangle.top, ref_element.scrollTop\n    marker_left               = rectangle.left    - ref_rectangle.left\n    marker_width              = rectangle.width\n    marker_height             = rectangle.height\n    marker_bottom             = marker_top        + marker_height\n    marker                    = µ.DOM.parse_one \"<div>#{marker_top.toFixed 0}px</div>\"\n    marker.style.top          = \"#{ marker_top    }px\"\n    marker.style.left         = \"#{ marker_left   }px\"\n    marker.style.width        = \"#{ marker_width  }px\"\n    marker.style.height       = \"#{ marker_height }px\"\n    marker.style.paddingLeft  = \"#{ marker_width  }px\"\n    µ.DOM.add_class marker, 'µ-clientrec'\n    µ.DOM.add_class marker, 'above' if marker_top     < 0\n    µ.DOM.add_class marker, 'below' if marker_bottom  > ref_rectangle.height\n    ref_element.appendChild marker\n  # µ.DOM.remove m2 for m2 in µ.DOM.select_all_from ref_element, '.µ-clientrec.ref-rectangle'\n  # m2 = document.createElement 'div'\n  # µ.DOM.add_class m2, 'µ-clientrec'\n  # µ.DOM.add_class m2, 'ref-rectangle'\n  # m2.style.top    = \"#{0}px\"\n  # m2.style.left   = \"#{0}px\"\n  # m2.style.width  = \"#{ref_rectangle.width}px\"\n  # m2.style.height = \"#{ref_rectangle.height}px\"\n  # ref_element.appendChild m2\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndraw_client_rectangles = =>\n  ref_elements = µ.DOM.select_all '.tracker'\n  for ref_element in ref_elements\n    debug \"draw_client_rectangles for ref_element\", ref_element\n    elements = µ.DOM.select_all_from ref_element, '& > div > span'\n    for element in elements\n      # debug '^123-3^', element\n      add_line_markers ref_element, element\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndo ->\n  for element in µ.DOM.select_all '.tracker > div'\n    µ.DOM.wrap_inner element, µ.DOM.parse_one '<span></span>'\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nµ.DOM.ready ->\n  log '^123-4^', \"ready\"\n  first_tracker = µ.DOM.select_first '.tracker'\n  first_tracker.scrollTop = 100\n  draw_client_rectangles()\n  button  = µ.DOM.select_first '#redraw'\n  µ.DOM.on button, 'click', ->\n    debug '^123-1^', \"redraw\"\n    draw_client_rectangles()\n  #.........................................................................................................\n  log '^123-10^', \"set up scroll events\"\n  show_scroll_tops = ->\n    doc_scroll_top      = µ.DOM.get_document_scroll_top().toFixed 0\n    tracker_scroll_top  = first_tracker.scrollTop.toFixed 0\n    log '^123-11^', 'scroll', doc_scroll_top, tracker_scroll_top\n    return null\n  µ.DOM.on document,      'scroll', show_scroll_tops\n  µ.DOM.on first_tracker, 'scroll', show_scroll_tops\n  # handler = ->\n  #   log '^123-12^', 'scroll tracker'\n  # ( µ.DOM.select_first '.tracker' ).addEventListener 'scroll', handler, true\n  return null\n\n\nlog '^123-5^', \"ops2 OK\""
  ]
}